# MongoDBase => [mongoDB入门篇](https://www.imooc.com/learn/295)
2015年的火热技术，我现在(2018年末)才来学习。。。。真的是要跟不上时代了(嘤嘤嘤~)。好了，不多说了，慢慢学呗。


## 自已的安装配置流程(windows环境,mongoDB版本为4.0.4)
步骤一：首先进入官网[下载页面](https://www.mongodb.com/download-center/community?jmp=nav)，在Download旁边的Package中选择MSI
步骤二：点击Download文件自动下载，然后再来看[这篇文章](https://blog.csdn.net/weixin_41226024/article/details/82857597?utm_source=blogxgwz3)，“查看服务”是打开电脑的“任务管理器”
步骤三：之后我们成功进入到这个页面后，那么就开始敲命令吧！


## 章节 3-1 mongoDB的基本操作之数据写入和查询
- show dbs : 查看有几个数据库
- use 数据库名 : 选择某个数据库
- db.dropDatabase() : 删除选择的数据库

- use 要创建的数据库名 : 表示准备要创建这个数据库，此时数据库处于待创建状态
- db.数据表名.insert({json格式的数据}) : 表示在要创建的数据库下面创建了一个数据表，此时数据库和数据表正式创建了(json格式的数据比如是{x:1})
- show dbs : 查看有几个数据库
- show collections : 查看有几个数据表
- db.数据表名.find() : 查看数据表的所有内容
- db.数据表名.find(json格式的数据) : 查看数据表的指定内容(json格式的数据比如是{x:1})
- for(i=3;i<100;i++)db.数据表名.insert({x:i}) : 循环插入97条数据
- db.数据表名.find().count() : 查看数据表有几条数据量
- db.数据表名.find().skip() : 跳过输出数据，比如skip(1)表示跳过前一条数据，skip(2)表示跳过前两条数据
- db.数据表名.find().limit() : 限制输出数据的数量
- db.数据表名.find().sort() : 排序输出数据，1为正序排序，-1为反序排序，比如sort({x:1})表示查询x键名，以正序的方式排序
- db.数据表名.find().skip(2).limit(2).sort({x:-1}) : 查找数据表中以x为键名、跳过前两条、只输出两条的反序数据(好奇怪的返回数据啊！！！！)


## 章节 3-2 mongoDB的基本操作之数据更新
- db.数据表名.update(要改的键名与键值,修改后的键名与键值) : 修改简单的单对象单个的数据
- db.数据表名.update(要改存在该键名有键值的数据，修改后的某键名与键值) : 修改复杂的单对象多个的数据


## 章节 3-3 mongoDB的基本操作之更新不存在的数据
- db.数据表名.update(要改的键名与键值,修改后的键名与键值,true) : 表示如果数据表不存在要改的键名与键值，那么就直接把修改后的键名与键值插入到数据表


## 章节 3-4 mongoDB的基本操作之更新多条数据
- db.数据表名.update(要改的键名与键值,{$set:修改后的键名与键值},false,true) : 修改所有匹配的数据


## 章节 3-5 mongoDB的基本操作之数据删除
- db.数据表名.remove(要删除的键名与键值) : 删除对应的数据
- db.数据表名.drop() : 删除对应的数据表
- show tables : 查看数据表


## 章节 3-6 mongoDB的基本操作之创建索引
- db.数据表名.getIndexes() : 查找数据集合中的所有索引
- db.数据表名.createIndex(键名:1或者-1) : 为数据表中某一个字段创建索引，1表示按升序创建索引，-1表示按降序创建索引
- 索引正向逆向有什么意义 : 在某些情况下，可以提高索引查询的效率。如，有一个登录日志库，若用户只关心最近一次登录的日期，那么，就可以用倒序来进行索引，这样匹配的次数会少很多。


## 章节 4-2 mongoDB的_id索引
概念：_id索引是绝大多数集合默认建立的索引，对于每个插入的数据，MongoDB都会自动生成一条唯一的_id字段。


## 章节 4-3 mongoDB的单键索引
概念：单键索引是最普通的索引，与_id索引不同，单键索引不会自动创建<br>

注意：从 mongoDB 3.0 开始，ensureIndex 被废弃，今后都仅仅是 createIndex 的一个别名。新版本的单键索引变为了db.数据表名.createIndex( { x: 1 } )


## 章节 4-4 mongoDB的多键索引
概念：多键索引与单键索引创建形式相同，区别在于字段的值。
- 单键索引：值为一个单一的值，例如字符串、数字或者日期
- 多键索引：值具有多个记录，例如数组


## 章节 4-5 mongoDB的复合索引
概念：当我们的查询条件不只有一个时，就需要建立复合索引，复合索引即同时对多个字段创建索引。


## 章节 4-6 mongoDB的过期索引
概念：是在一段时间后会过期的索引，在索引过期后，相应的数据会被删除，这适合存储一些在一段时间之后会失效的数据，比如用户的登录信息、存储的日志等。
限制：
- 存储在过期索引字段的值必须是指定的时间类型，就是必须是ISODate或者ISODate数组，不能使用时间戳，否则不能被自动删除；
- 如果指定了ISODate数组，则按照最小的时间进行删除；
- 过期索引不能是符合索引；
- 删除时间不是很精确，因为删除过程是由后台程序每60s跑一次，而且删除也需要一些时间，所以存在误差。


## 章节 5-1 mongoDB的全文索引
概念：对字符串与字符串数组创建全文可搜索的索引，适用情况比如是文章的作者、文章的标题或者文章的内容。


## 章节 5-2 mongoDB创建全文索引的方法
- 单键索引：db.articles.createIndex({key:'text'})
- 复合索引：db.articles.createIndex({key_1:'text',key_2:'text'})
- 全文索引：db.articles.createIndex({"$**":"text"})


## 章节 5-3 mongoDB使用全文索引进行查询
- db.数据表名.find({$text:{$search:"字段1"}}) : 查找包含字段1的数据
- db.数据表名.find({$text:{$search:"字段1 字段2 字段3"}}) : 查找包含字段1或者字段2或者字段3的数据
- db.数据表名.find({$text:{$search:"字段1 字段2 -字段3"}}) : 查找除了字段3，包含字段1或者字段2的数据
- db.数据表名.find({$text:{$search:"\'字段1\' \'字段2\' \'字段3\'"}}) : 查找包含字段1又包含字段2有包含字段3的数据


## 章节 5-4 mongoDB使用全文索引相似度查询
使用$meta操作符:{score:{$meta:"textScore"}}，写在查询条件后面可以得到返回结果的相似度，与sort一起使用，可以达到很好的实用效果


## 章节 5-4 mongoDB使用全文索引的使用限制
- 每次查询，只能指定一个$text查询
- $text查询不能出现在$nor查询中
- 查询中如果包含了$text，那么hint不再起作用


## 尾声
敲不动了，不敲了。除了是因为MongoDB的版本变更，还有就是课程讲的都是一些基础，建议现在学习按着官网来就好了，下面有相关的教程地址以及其他童鞋的学习总结<br>
[1、易百教程](https://www.yiibai.com/mongodb/mongodb_quick_guide.html)<br>
[2、菜鸟教程](http://www.runoob.com/mongodb/mongodb-tutorial.html)<br>
[3、课程学习笔记](http://www.lrshuai.top/atc/show/67)<br>

